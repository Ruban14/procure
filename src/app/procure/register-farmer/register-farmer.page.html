<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>Farmer Register</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="resetFarmerField()" expand="block" fill="solid">
        <ion-icon style="font-size: 25px" name="sync"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="farmer_register_form">
    <ion-list lines="full">
      <ion-row class="ion-align-items-center">
        <!-- first name -->
        <ion-col>
          <ion-item
            [style.border]="farmer_register_form.value.first_name == null || farmer_register_form.value.first_name == ''  ? '1px solid red' : '1px solid lightgrey'">
            <ion-label position="stacked">First Name<ion-icon name="star" style="color: red;"></ion-icon>
            </ion-label>
            <ion-input formControlName="first_name"></ion-input>
          </ion-item>
        </ion-col>
        <!-- last name -->
        <ion-col>
          <ion-item
            [style.border]="farmer_register_form.value.last_name == null || farmer_register_form.value.last_name == ''  ? '1px solid red' : '1px solid lightgrey'">
            <ion-label position="stacked">Last Name<ion-icon name="star" style="color: red"></ion-icon>
            </ion-label>
            <ion-input formControlName="last_name"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row class="ion-align-items-center">
        <ion-col>
          <ion-item class="border-item">
            <ion-label position="stacked">E-mail</ion-label>
            <ion-input type="email" formControlName="email"></ion-input>
          </ion-item>
        </ion-col>
        <!-- mobile number -->
        <ion-col>
          <ion-item
            [style.border]="farmer_register_form.value.mobile == null || farmer_register_form.value.mobile == ''  ? '1px solid red' : '1px solid lightgrey'">
            <ion-label position="stacked">Mobile Number<ion-icon name="star" style="color: red"></ion-icon>
            </ion-label>
            <ion-input formControlName="mobile" type="number"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <!-- check for whatsapp -->
      <ion-row class="ion-align-items-center">
        <ion-col size="6">
          <ion-item style="height: 58px"
            [style.border]="farmer_register_form.value.is_whatsapp_number == null || farmer_register_form.value.phone == ''  ? '1px solid red' : '1px solid lightgrey'">
            <ion-label position="stacked">Is whatsapp number<ion-icon name="star" style="color: red">
              </ion-icon>
            </ion-label>
            <ion-checkbox formControlName="is_whatsapp_number" (ionChange)="change_whatsapp_number($event)"
              style="margin-top: 11px;"></ion-checkbox>
          </ion-item>
        </ion-col>
        <ion-col size="6">
          <ion-item>
            <ion-label position="stacked">Whatsapp Number</ion-label>
            <ion-input formControlName="whatsapp_number" type="number"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row class="ion-align-items-center">
        <ion-col>
          <ion-item class="border-item">
            <ion-label position="stacked">Landmark
            </ion-label>
            <ion-input formControlName="landmark"></ion-input>
          </ion-item>
        </ion-col>
        <!-- state -->
        <ion-col>
          <ion-item>
            <ion-label position="stacked">City
            </ion-label>
            <ion-input formControlName="city"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <!-- street address -->
      <ion-row class="ion-align-items-center">
        <ion-col>
          <ion-item class="border-item"
            [style.border]="farmer_register_form.value.street_address == null || farmer_register_form.value.street_address == ''  ? '1px solid red' : '1px solid lightgrey'">
            <ion-label position="stacked">Door No, Address<ion-icon name="star" style="color: red">
              </ion-icon>
            </ion-label>
            <ion-input formControlName="street_address"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row class="ion-align-items-center">
        <ion-col>
          <ion-item
            [style.border]="farmer_register_form.value.district == null || farmer_register_form.value.district == ''  ? '1px solid red' : '1px solid lightgrey'">
            <ion-label position="stacked">State<ion-icon name="star" style="color: red"></ion-icon>
            </ion-label>
            <ion-select formControlName="state" interface="action-sheet">
              <ion-select-option *ngFor="let state of states" [value]="state.id">
                {{state.name}}
              </ion-select-option>
            </ion-select>
          </ion-item>
        </ion-col>

        <ion-col>
          <ion-item
            [style.border]="farmer_register_form.value.district == null || farmer_register_form.value.district == ''  ? '1px solid red' : '1px solid lightgrey'">
            <ion-label position="stacked">District<ion-icon name="star" style="color: red"></ion-icon>
            </ion-label>
            <ion-select formControlName="district" interface="action-sheet">
              <ion-select-option *ngFor="let district of districts[farmer_register_form.value.state]"
                [value]="district.id">
                {{district.name}}
              </ion-select-option>
            </ion-select>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row class="ion-align-items-center">
        <ion-col>
          <ion-item class="border-item"
            [style.border]="farmer_register_form.value.street_address == null || farmer_register_form.value.street_address == ''  ? '1px solid red' : '1px solid lightgrey'">
            <ion-label position="stacked">Taluk<ion-icon name="star" style="color: red">
              </ion-icon>
            </ion-label>
            <ion-input formControlName="taluk"></ion-input>
          </ion-item>
        </ion-col>

        <ion-col>
          <ion-item class="border-item"
            [style.border]="farmer_register_form.value.street_address == null || farmer_register_form.value.street_address == ''  ? '1px solid red' : '1px solid lightgrey'">
            <ion-label position="stacked">Village<ion-icon name="star" style="color: red">
              </ion-icon>
            </ion-label>
            <ion-input formControlName="street_address"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row class="ion-align-items-center">
        <ion-col>
          <ion-item
            [style.border]="farmer_register_form.value.pincode == null || farmer_register_form.value.pincode == ''  ? '1px solid red' : '1px solid lightgrey'">
            <ion-label position="stacked">Pincode<ion-icon name="star" style="color: red"></ion-icon>
            </ion-label>
            <ion-input type="number" formControlName="pincode"></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <!-- language -->
      <ion-row class="ion-align-items-center">
        <ion-col>
          <ion-item class="border-item">
            <ion-label position="stacked">Language</ion-label>
            <ion-select formControlName="communication_language" interface="action-sheet">
              <ion-select-option *ngFor="let language of language_list" [value]="language.id">
                {{language.name}}
              </ion-select-option>
            </ion-select>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="5">
          <ion-item class="border-item">
            <ion-label position="floating">Latitude</ion-label>
            <ion-input type="number" formControlName="latitude" readonly></ion-input>
          </ion-item>
        </ion-col>
        <ion-col size="5">
          <ion-item class="border-item">
            <ion-label position="floating">Longitude</ion-label>
            <ion-input type="number" formControlName="longitude" readonly></ion-input>
          </ion-item>
        </ion-col>
        <ion-col size="2">
          <ion-button style="margin-top: 45%;" size="small" (click)="getCurrentLocation()">
            <ion-icon name="locate" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-col>
      </ion-row>

      <ion-row class="ion-align-items-center">
        <ion-col></ion-col>
        <ion-col>
          <ion-button class="activated" [disabled]="!farmer_register_form.valid" type="submit"
            [color]="farmer_register_form.valid ? 'success' : 'medium'" (click)="registerFarmer()">Register Farmer
          </ion-button>
        </ion-col>
        <ion-col></ion-col>
      </ion-row>

    </ion-list>
  </form>
</ion-content>